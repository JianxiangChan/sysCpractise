# 同步


##4.2 
**设计目标：**

1. 支持多线程和单线程版本。对于多线程版本，由实现者（在链表）加锁/解锁。对单线程版本，其性能不受影响。
2. 区分单线程和多线程版本的时候，不需要链接不同的库，或者需要宏来控制，完全可以在运行时切换。
3. 保存双向链表的通用性，不依赖于任何平台。

**分析：**

1. 这里要求锁是可以变化的，这就要求我们隔离这种变化。 
2. **接口**只定义调用者和实现者之间的契约，而不规定实现的方法。
3. C语言的接口的朴素定义：一组相关的回调函数和共享的上下文。

**接口需要注意的问题：**

1. 接口一定要抽象
2. 不能有create函数，但是一定要有destory函数。

**互斥锁不能嵌套**
